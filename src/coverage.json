{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-08T15:09:51.230Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 11,
    "implemented": 6,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Create a new admin-only page at route `/admin/import` for importing categories and products from a JSON file previously exported by the existing Export page, using the exact ImportData structure (categories, products, exportTimestamp, itemCounts).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx",
          "frontend/src/router.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx",
          "frontend/src/router.tsx"
        ]
      },
      {
        "id": "REQ-10",
        "summary": "Implement product import behavior in the backend: match products by `barcode`; if a product exists, update its fields; if not, create it. Preserve existing product photo/image data when the imported product has an empty/missing photo field during an update.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-11",
        "summary": "Ensure backend data consistency for category-product references during import: products must only reference valid category IDs after the categories upsert step; reject/abort the import if references are invalid.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "Add navigation entries to reach `/admin/import` from (a) the admin sidebar left panel and (b) the admin dashboard cards; place the Import link/card after Export.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/admin/AdminSidebar.tsx",
          "frontend/src/pages/admin/DashboardHomePage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/admin/AdminSidebar.tsx",
          "frontend/src/pages/admin/DashboardHomePage.tsx"
        ]
      },
      {
        "id": "REQ-3",
        "summary": "Implement the Import page UI sections: (1) Import Information section showing filename, counts, export date, and validation status after file selection; (2) Drag-and-drop + click-to-select upload area that only accepts `.json` files; (3) Clear/cancel button to remove the selected file and to stop an in-progress import request.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx"
        ]
      },
      {
        "id": "REQ-4",
        "summary": "Implement the required client-side flow: file selection → read with FileReader → parse using `parseJSONWithBigInt()` → validate structure and field types (including numeric validation/conversion) → if valid, automatically trigger the backend import call without an extra button click → display simple progress states (no real-time per-item progress).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/utils/importValidation.ts",
          "frontend/src/pages/admin/ImportPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/utils/importValidation.ts",
          "frontend/src/pages/admin/ImportPage.tsx"
        ]
      },
      {
        "id": "REQ-5",
        "summary": "Use the shared API utilities for the import request: call the backend batch import method via the actor and handle errors using the standardized `ApiResponseHandler` patterns; display Spanish error messages and a Spanish success toast summarizing imported/updated counts.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useAdminImport.ts",
          "frontend/src/pages/admin/ImportPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useAdminImport.ts",
          "frontend/src/pages/admin/ImportPage.tsx"
        ]
      },
      {
        "id": "REQ-6",
        "summary": "After import completion, display an Import Results section with: counts for categories imported/updated, products imported/updated, and error count (if any); include post-import action links to the Categories and Products admin pages; include a button to clear/reset the import interface for the next file.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/admin/ImportPage.tsx"
        ]
      },
      {
        "id": "REQ-7",
        "summary": "Add a new backend actor method `batchImportData(importData: ImportData) : async ImportResult` that processes the full import in a single request, upserting categories first and then products, and returns counts plus any errors.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-8",
        "summary": "Implement transactional/atomic import semantics in `batchImportData`: if any validation or consistency check fails, do not persist partial changes (rollback behavior) and return an ImportResult indicating failure/errors.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-9",
        "summary": "Implement category ID counter management in the backend: after importing categories, ensure `lastCategoryId` is updated so that future category creation cannot conflict with imported IDs; set it to at least (max imported categoryId + 1) without decreasing it if it is already higher.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "backend/migration.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/admin/AdminSidebar.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useAdminImport.ts",
    "frontend/src/pages/admin/DashboardHomePage.tsx",
    "frontend/src/pages/admin/ImportPage.tsx",
    "frontend/src/router.tsx",
    "frontend/src/utils/importValidation.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}