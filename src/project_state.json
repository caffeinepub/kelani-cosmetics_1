{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Build a Spanish /contacto page showing two store locations with stable-actor-based data fetching, robust loading/error/empty states, and interactive Google Maps embeds.",
  "architectural_notes": [
    "All /contacto data fetching must use the stable actor pattern (stabilize actor via useState+useEffect; enable query only when stable actor exists) to prevent duplicate API calls.",
    "Use a single backend call getBothStoreDetails() returning both stores; cache with staleTime ~30 min and refetchOnWindowFocus=false.",
    "Do not remove/modify/overwrite the :root CSS custom properties block in index.css; append any new styles only below it."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-replace-the-current-static-frontend-src-pages-public-contactopage-tsx-with-a-fully-featured-contacto-page-that-uses-the-existing-public-header-footer-via-publiclayout-and-renders-all-content-inside-a-centered-max-width-container-1200px-with-a-responsive-two-store-layout-side-by-side-on-desktop-stacked-on-mobile-and-clear-visual-separation-between-the-two-stores",
      "title": "Replace the current static `frontend/src/pages/public/ContactoPage.tsx` with a fully featured `/contacto` page that uses the existing public header/footer via `PublicLayout`, and renders all content inside a centered max-width container (1200px) with a responsive two-store layout (side-by-side on desktop, stacked on mobile) and clear visual separation between the two stores.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-contact-page-data-fetching-using-the-stable-actor-pattern-to-prevent-repeated-calls-caused-by-actor-reference-changes-stabilize-the-actor-reference-with-usestate-useeffect-and-fetch-both-stores-via-a-single-backend-call-to-getbothstoredetails-react-query-querykey-both-store-details-enabled-only-when-stable-actor-exists-staletime-30-minutes-and-refetchonwindowfocus-false",
      "title": "Implement contact-page data fetching using the stable actor pattern to prevent repeated calls caused by actor reference changes: stabilize the actor reference with `useState` + `useEffect`, and fetch both stores via a single backend call to `getBothStoreDetails()` (React Query `queryKey: ['both-store-details']`, `enabled` only when stable actor exists, `staleTime` 30 minutes, and `refetchOnWindowFocus: false`).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-initial-loading-state-controller-for-the-contact-page-using-an-explicit-isinitialloading-state-that-shows-immediately-on-first-paint-and-is-set-to-false-only-when-the-store-details-fetch-completes-success-or-error-during-initial-loading-show-a-centered-spinner-with-the-text-cargando-informaci-n-de-contacto-using-the-same-spinner-styling-pattern-as-the-public-category-page-loader2-icon-animate-spin-primary-color",
      "title": "Add an initial loading-state controller for the contact page using an explicit `isInitialLoading` state that shows immediately on first paint and is set to false only when the store-details fetch completes (success or error). During initial loading, show a centered spinner with the text \"Cargando información de contacto...\" using the same spinner styling pattern as the public category page (Loader2 icon, animate-spin, primary color).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-after-initial-loading-completes-implement-robust-error-empty-partial-data-handling-1-if-the-fetch-errors-show-error-al-cargar-la-informaci-n-de-contacto-and-a-retry-button-that-retries-the-query-using-the-same-ux-pattern-as-the-public-category-page-2-if-no-store-details-are-returned-show-an-empty-state-message-3-if-only-one-store-is-available-render-the-available-store-and-show-a-clear-message-for-the-missing-store-4-only-render-a-store-card-when-its-isactive-field-is-true",
      "title": "After initial loading completes, implement robust error/empty/partial-data handling: (1) if the fetch errors, show \"Error al cargar la información de contacto\" and a retry button that retries the query using the same UX pattern as the public category page; (2) if no store details are returned, show an empty-state message; (3) if only one store is available, render the available store and show a clear message for the missing store; (4) only render a store card when its `isActive` field is true.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-render-the-page-header-exactly-with-main-title-contacto-variety-discount-store-and-subtitle-vis-tanos-en-nuestras-tiendas-o-cont-ctanos-directamente-keep-the-interface-copy-on-the-page-in-spanish-as-specified-section-headings-button-labels-loading-error-text-and-store-labels-tienda-1-and-tienda-2",
      "title": "Render the page header exactly with: main title \"Contacto - Variety Discount Store\" and subtitle \"Visítanos en nuestras tiendas o contáctanos directamente\"; keep the interface copy on the page in Spanish as specified (section headings, button labels, loading/error text, and store labels \"Tienda 1\" and \"Tienda 2\").",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-for-each-active-store-render-a-store-information-card-that-includes-store-name-prominent-address-with-a-location-icon-and-clickable-directions-link-phone-tel-link-formatted-display-whatsapp-wa-me-link-formatted-display-email-mailto-link-and-social-links-shown-only-when-present-facebook-instagram-website-each-with-a-recognizable-icon-and-opening-in-a-new-tab-when-applicable",
      "title": "For each active store, render a store information card that includes: store name (prominent), address (with a location icon and clickable directions link), phone (tel: link + formatted display), WhatsApp (wa.me link + formatted display), email (mailto: link), and social links shown only when present (Facebook, Instagram, Website), each with a recognizable icon and opening in a new tab when applicable.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-elegant-store-hours-section-per-store-titled-horario-de-apertura-that-parses-the-backend-provided-storehours-tuple-array-and-displays-each-day-as-a-bold-spanish-label-monday-lunes-tuesday-martes-wednesday-mi-rcoles-thursday-jueves-friday-viernes-saturday-s-bado-sunday-domingo-with-the-hours-on-a-separate-line-below-with-clean-spacing-and-alignment",
      "title": "Implement an elegant store-hours section per store titled \"Horario de Apertura\" that parses the backend-provided `storeHours` tuple array and displays each day as a bold Spanish label (Monday→Lunes, Tuesday→Martes, Wednesday→Miércoles, Thursday→Jueves, Friday→Viernes, Saturday→Sábado, Sunday→Domingo) with the hours on a separate line below, with clean spacing and alignment.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-map-section-per-store-that-a-parses-the-coordinates-json-string-in-the-format-lat-number-lng-number-b-lazy-loads-a-responsive-google-maps-embed-300px-height-rounded-corners-centered-on-those-coordinates-with-interactive-zoom-pan-and-c-renders-a-primary-obtener-direcciones-button-with-a-navigation-icon-below-the-map-that-opens-https-www-google-com-maps-dir-api-1-destination-latitude-longitude-in-a-new-tab-if-coordinates-cannot-be-parsed-validated-hide-the-embed-and-button-and-show-a-clear-fallback-message",
      "title": "Add a map section per store that (a) parses the `coordinates` JSON string in the format `{ \"lat\": number, \"lng\": number }`, (b) lazy-loads a responsive Google Maps embed (300px height, rounded corners) centered on those coordinates with interactive zoom/pan, and (c) renders a primary \"Obtener Direcciones\" button (with a navigation icon) below the map that opens `https://www.google.com/maps/dir/?api=1&destination=${latitude},${longitude}` in a new tab. If coordinates cannot be parsed/validated, hide the embed and button and show a clear fallback message.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create /contacto page with two-store responsive layout, stable actor pattern data fetching via getBothStoreDetails(), loading/error/empty/partial states, store cards (contact links, social links, hours translated to Spanish), and Google Maps embed + directions button; preserve :root CSS variables block in index.css",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Ensure styling changes do not remove, modify, or overwrite the existing `:root` CSS custom-properties block in `frontend/src/index.css`; any new global styles (if needed) must be appended below the existing variables block without changing variable names, values, or structure.",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Implement full /contacto page with two-store details, stable actor data fetching, and embedded maps",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}