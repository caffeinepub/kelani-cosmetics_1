{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-create-a-reusable-storeselector-ui-used-by-both-the-product-details-modal-and-the-product-details-page-a-primary-contact-button-labeled-contactar-sobre-este-producto-that-toggles-an-expandable-section-directly-beneath-it-when-expanded-render-one-touch-friendly-button-per-available-store-minimum-44px-height-labeled-with-the-store-name-from-store-details-clicking-a-store-button-opens-whatsapp-in-a-new-tab-with-a-pre-filled-spanish-message-that-includes-the-product-name-and-barcode-using-that-store-s-whatsapp-number-the-contact-button-must-not-open-whatsapp-directly-without-a-store-selection-clicking-the-contact-button-again-collapses-the-selector-add-a-smooth-expand-collapse-animation-optionally-collapse-after-selecting-a-store",
      "featureTitle": "Create a reusable StoreSelector UI used by both the Product Details Modal and the Product Details Page: a primary contact button labeled \"Contactar sobre este producto\" that toggles an expandable section directly beneath it; when expanded, render one touch-friendly button per available store (minimum 44px height) labeled with the store name from store details; clicking a store button opens WhatsApp in a new tab with a pre-filled Spanish message that includes the product name and barcode, using that storeâ€™s WhatsApp number; the contact button must not open WhatsApp directly without a store selection; clicking the contact button again collapses the selector; add a smooth expand/collapse animation; optionally collapse after selecting a store.",
      "files": [
        "frontend/src/components/public/product/StoreSelector.tsx",
        "frontend/src/pages/public/ProductPage.tsx",
        "frontend/src/utils/whatsappContact.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-1"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-update-the-product-details-modal-flow-so-it-receives-and-uses-both-store-details-from-its-parent-no-additional-api-calls-inside-the-modal-refactor-the-existing-modal-whatsapp-logic-to-use-the-new-storeselector-and-accept-a-complete-store-details-array-for-rendering-options-ensure-modal-state-defaults-to-collapsed-when-opened-ensure-spanish-only-ui-text-remains-unchanged-including-the-contactar-sobre-este-producto-label",
      "featureTitle": "Update the Product Details Modal flow so it receives and uses both store details from its parent (no additional API calls inside the modal): refactor the existing modal WhatsApp logic to use the new StoreSelector and accept a complete store details array for rendering options; ensure modal state defaults to collapsed when opened; ensure Spanish-only UI text remains unchanged (including the \"Contactar sobre este producto\" label).",
      "files": [
        "frontend/src/components/public/product/ProductDetailsModal.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-2"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-update-the-product-modal-state-data-flow-to-support-passing-and-storing-an-array-of-store-details-two-stores-instead-of-a-single-store-adjust-the-modal-store-and-all-modal-openers-e-g-homepage-category-sections-and-search-selection-to-pass-the-complete-result-of-the-existing-usebothstoredetails-hook-to-the-modal-so-both-store-options-can-be-shown",
      "featureTitle": "Update the product modal state/data flow to support passing and storing an array of store details (two stores) instead of a single store: adjust the modal store and all modal openers (e.g., homepage category sections and search selection) to pass the complete result of the existing `useBothStoreDetails()` hook to the modal so both store options can be shown.",
      "files": [
        "frontend/src/components/public/home/CategorySection.tsx",
        "frontend/src/components/public/home/HomepageCategoriesSection.tsx",
        "frontend/src/components/public/home/search/SearchBar.tsx",
        "frontend/src/components/public/products/ProductGrid.tsx",
        "frontend/src/pages/public/CategoryPage.tsx",
        "frontend/src/stores/productModalStore.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-3"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-update-the-product-details-page-frontend-src-pages-public-productpage-tsx-to-use-the-new-storeselector-fetch-product-data-using-the-existing-product-query-fetch-both-store-details-using-the-existing-usebothstoredetails-hook-backed-by-getbothstoredetails-pass-the-resulting-store-details-array-into-the-selector-remove-the-current-behavior-that-automatically-uses-only-the-first-store-for-whatsapp",
      "featureTitle": "Update the Product Details Page (`frontend/src/pages/public/ProductPage.tsx`) to use the new StoreSelector: fetch product data using the existing product query; fetch both store details using the existing `useBothStoreDetails()` hook (backed by `getBothStoreDetails()`); pass the resulting store details array into the selector; remove the current behavior that automatically uses only the first store for WhatsApp.",
      "files": [
        "frontend/src/pages/public/ProductPage.tsx",
        "frontend/src/utils/whatsappContact.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-4"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-preserve-spanish-ui-throughout-this-change-do-not-introduce-any-new-english-ui-strings-related-to-the-store-selector-contact-flow-store-names-must-display-exactly-as-configured-in-admin-store-details-ensure-whatsapp-message-text-is-spanish",
      "featureTitle": "Preserve Spanish UI throughout this change: do not introduce any new English UI strings related to the store selector/contact flow; store names must display exactly as configured in admin store details; ensure WhatsApp message text is Spanish.",
      "files": [
        "frontend/src/components/public/product/StoreSelector.tsx",
        "frontend/src/utils/whatsappContact.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-5"
      ],
      "confidence": "high"
    }
  ]
}